C51 COMPILER V9.60.0.0   MAIN                                                              10/11/2019 16:25:56 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.ls
                    -t) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg51.h>
   2          #include <intrins.h>
   3          #define NOP() _nop_()
   4          
   5          sbit LED1=P3^0;
   6          sbit LED2=P3^1;
   7          /*
   8          sbit MOSIO=P3^4;//pin14
   9          sbit R_CLK=P3^5;//pin12
  10          sbit S_CLK=P3^6;//pin11
  11          sbit OE=P3^7;
  12          
  13          //void fakeDelay(unsigned int i);
  14          void HC595SendData(unsigned char SendVal);
  15          void pwm(char);
  16          void tim0init();
  17          void delay(unsigned int);
  18          
  19          unsigned int pp=0;
  20          unsigned char Led=0xff;
  21          char i;
  22          */
  23          void main( )
  24          {
  25   1              //tim0init();
  26   1      
  27   1      
  28   1          while(1)
  29   1          {
  30   2                      //HC595SendData(Led);
  31   2                      //HC595SendData(Led);
  32   2              LED1=1;
  33   2                      LED2=1;
  34   2          }
  35   1      }
  36          /*
  37          
  38          void pwm(char a)
  39          {
  40                  //char i,temp=0;
  41          //      for(i=1;i<=a;i++)
  42          //      {
  43          //              HC595SendData(Led);
  44          //              HC595SendData(Led);
  45          //      }
  46          //      for(i=a;i<=100;i++)
  47          //      {OE=1;temp++;}
  48          //      OE=0;
  49                  HC595SendData(Led);
  50                  HC595SendData(Led);
  51                  delay(a);
  52                  OE=1;
  53                  delay(100-a);
  54                  OE=0;
C51 COMPILER V9.60.0.0   MAIN                                                              10/11/2019 16:25:56 PAGE 2   

  55          }
  56          //void fakeDelay(unsigned int i)
  57          //{ 
  58          //      int temp=0;
  59          //    unsigned int j;
  60          //    for(i;i>0;i--)
  61          //        temp++;
  62          //}
  63          
  64          void delay(unsigned int i)
  65          {
  66                  unsigned int temp=pp;
  67                  while(1)
  68                  {
  69                          if((pp==temp+i)%60000)break;
  70                  }
  71          }
  72          
  73          void HC595SendData(unsigned char SendVal)
  74          {
  75              unsigned char i;
  76              for(i=0;i<8;i++)
  77              {
  78                  if((SendVal<<i)&0x80)MOSIO=1;
  79                  else MOSIO=0;
  80                                          //MOSIO=1;  
  81                                  S_CLK=0;
  82                  NOP();
  83                  NOP();
  84                  S_CLK=1;
  85                                  delay(20);
  86              }
  87          
  88              R_CLK=0;
  89              NOP();
  90              NOP();
  91              R_CLK=1;
  92          }
  93          
  94          
  95          void tim0init()
  96          {
  97                  TMOD=0x01;               //模式设置，00000001，可见采用的是定时器0，工作与模式1（M1=0，M0=1）。
  98                  TR0=1;                   //打开定时器
  99                  TH0=(65536-102)/256;             //定时器设置，每隔100微秒发起一次中断。
 100                  TL0=(65536-102)%256;
 101                  ET0=1;                   //开定时器0中断
 102                  EA=1;                    //开总中断
 103          }
 104          
 105          void time0() interrupt 1
 106          {       TH0=(65536-102)/256;//1ms
 107                  TL0=(65536-102)%256;
 108                  pp++;
 109                  if(pp==60000)pp=0;
 110          }
 111          */


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =      6    ----
   CONSTANT SIZE    =   ----    ----
C51 COMPILER V9.60.0.0   MAIN                                                              10/11/2019 16:25:56 PAGE 3   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
